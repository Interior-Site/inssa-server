<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inssa.server.api.board.mapper.BoardMapper">

    <sql id = "boardColumns">
        BOARD_NO,
        BOARD_NAME,
        BOARD_GUBUN,
        BOARD_TITLE,
        BOARD_CONTENT,
        BOARD_REGDATE,
        BOARD_CHGDATE,
        BOARD_STATUS,
        BOARD_VIEW,
        BOARD_NOTICE,
        USER_NO
    </sql>



    <insert id="insertBoard" >
        INSERT INTO BOARD
                (BOARD_NO,
                 BOARD_NAME,
                 BOARD_GUBUN,
                 BOARD_TITLE,
                 BOARD_CONTENT,
                 BOARD_REGDATE,
                 BOARD_CHGDATE,
                 BOARD_STATUS,
                 BOARD_VIEW,
                 BOARD_NOTICE,
                 USER_NO)
        VALUES (
<!--                #{boardNo}  시퀀스 생성 후 생성된 시퀀스로 수정해야함-->
                #{boardNo},
                #{boardName},
                #{boardGubun},
                #{boardTitle},
                #{boardContent},
                now(),
                now(),
                #{boardStatus},
                #{boardView},
                #{boardNotice},
                #{userNo}
        )
    </insert>

    <!-- 게시글 목록 조회 -->
    <select id="selectBoardList" resultType="com.inssa.server.api.board.dto.BoardDto">
        SELECT *
        FROM BOARD
        WHERE BOARD_STATUS = 'Y'
        ORDER BY BOARD_NO DESC
    </select>

    <!-- 게시글 상세조회 -->
    <select id="selectBoard" resultType="com.inssa.server.api.board.dto.BoardDto" >
        SELECT *
        FROM BOARD
        WHERE BOARD_NO = #{boardNo}
        AND BOARD_STATUS = 'Y'
    </select>

    <!-- 게시글 수정 -->
    <update id="updateBoard" parameterType="com.inssa.server.api.board.dto.BoardDto">
        UPDATE BOARD
        SET
        BOARD_CHGDATE = NOW(),
        BOARD_TITLE = #{boardTitle},
        BOARD_CONTENT = #{boardContent}
        WHERE BOARD_NO = #{boardNo}
    </update>

    <!-- 게시글 삭제 : delete 대신 boardStatus 를 'Y'로 변경하여 비활성화 시킨다 -->
    <update id="deleteBoard" parameterType="int">
        UPDATE BOARD
        SET
        BOARD_CHGDATE = NOW(),
        BOARD_STATUS = 'N'
        WHERE BOARD_NO = #{boardNo}

    </update>

</mapper>